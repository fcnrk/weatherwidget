<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eskişehir Hava Durumu</title>

  <!-- ✅ Climacons Animated Font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/climacons-font/0.1.0/css/climacons-font.css" />

  <!-- ✅ Loew Font (via cdnfonts) -->
  <link href="https://fonts.cdnfonts.com/css/loew" rel="stylesheet">

  <style>
    :root{
      --navy:#1d2f5d;
      --white:#fff;
      --divider:rgba(255,255,255,.08);
    }

    *{box-sizing:border-box;}
    body{
      margin:0;
      background:#eee;
      font-family:'Loew', 'Open Sans', system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }

    .card{
      width:360px;
      color:var(--white);
      background:var(--navy);
      border-radius:8px;
      overflow:hidden;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }

    .head{
      text-align:center;
      padding:20px 0 10px;
      font-weight:700;
      letter-spacing:.3px;
    }

    .head .city{
      font-size:20px;
      text-transform:uppercase;
    }

    .head .subtitle{
      font-size:13px;
      opacity:.9;
      margin-top:2px;
    }

    .now{
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:16px;
      padding:10px 20px 16px;
    }

    .bigicon{
      font-size:64px;
      line-height:1;
    }

    .tempwrap{
      display:flex;
      flex-direction:column;
    }

    .temp{
      font-size:44px;
      font-weight:700;
      line-height:1;
    }

    .cond{
      font-size:15px;
      margin-top:4px;
      opacity:.9;
      text-transform:lowercase;
    }

    .rows{
      padding:4px 10px 12px;
    }

    .row{
      display:grid;
      grid-template-columns:1fr 30px 1fr 1fr;
      align-items:center;
      gap:8px;
      padding:10px;
      border-top:1px solid var(--divider);
    }

    .dow{
      font-weight:600;
    }

    .mini{
      font-size:24px;
    }

    .hi{
      text-align:right;
    }

    .lo{
      text-align:right;
      opacity:.9;
    }

    /* Smoother font rendering */
    body, .card {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="head">
      <div class="city">ESKİŞEHİR</div>
      <div class="subtitle">HAVA DURUMU</div>
    </div>

    <div class="now">
      <i id="bigIcon" class="climacon cloud bigicon"></i>
      <div class="tempwrap">
        <div id="tempNow" class="temp">--°C</div>
        <div id="condNow" class="cond">yükleniyor…</div>
      </div>
    </div>

    <div class="rows" id="rows"></div>
  </div>

  <script>
    const LAT = 39.7767, LON = 30.5206;

    const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}` +
      `&current=temperature_2m,weather_code` +
      `&daily=weathercode,temperature_2m_max,temperature_2m_min` +
      `&timezone=auto`;

    const WMO_TR = {
      0:"açık",1:"çoğunlukla açık",2:"parçalı bulutlu",3:"kapalı",
      45:"sis",48:"kırağılı sis",
      51:"çise: hafif",53:"çise: orta",55:"çise: yoğun",
      61:"yağmur: hafif",63:"yağmur: orta",65:"yağmur: kuvvetli",
      66:"suyla karışık: hafif",67:"suyla karışık: kuvvetli",
      71:"kar: hafif",73:"kar: orta",75:"kar: kuvvetli",
      77:"kar taneleri",80:"sağanak: hafif",81:"sağanak: orta",82:"sağanak: kuvvetli",
      85:"kar sağanağı: hafif",86:"kar sağanağı: kuvvetli",
      95:"gök gürültülü fırtına",96:"dolulu fırtına: hafif",99:"dolulu fırtına: kuvvetli"
    };

    function iconClass(code){
      const rainy=[51,53,55,61,63,65,66,67,80,81,82,95,96,99];
      const snowy=[71,73,75,77,85,86];
      const cloudy=[1,2,3,45,48];
      if(rainy.includes(code)) return "climacon rain";
      if(snowy.includes(code)) return "climacon snow";
      if(cloudy.includes(code)) return "climacon cloud";
      return "climacon sun";
    }

    const DAYS_TR=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"];

    fetch(url)
      .then(r=>r.json())
      .then(data=>{
        const tNow=Math.round(data.current.temperature_2m);
        const wNow=data.current.weather_code;
        document.getElementById('tempNow').textContent=`${tNow}°C`;
        document.getElementById('condNow').textContent=WMO_TR[wNow]||"—";
        document.getElementById('bigIcon').className=iconClass(wNow)+" bigicon";

        const rows=document.getElementById('rows');
        rows.innerHTML="";
        const days=data.daily.time;
        for(let i=0;i<5&&i<days.length;i++){
          const d=new Date(days[i]);
          const dow=DAYS_TR[d.getDay()];
          const code=data.daily.weathercode[i];
          const tmax=Math.round(data.daily.temperature_2m_max[i]);
          const tmin=Math.round(data.daily.temperature_2m_min[i]);
          const row=document.createElement('div');
          row.className='row';
          row.innerHTML=`
            <div class="dow">${dow}</div>
            <i class="${iconClass(code)} mini"></i>
            <div class="hi">${tmax}°C</div>
            <div class="lo">${tmin}°C</div>
          `;
          rows.appendChild(row);
        }
      })
      .catch(err=>{
        document.getElementById('condNow').textContent='veri alınamadı';
        console.error(err);
      });
  </script>
</body>
</html>
